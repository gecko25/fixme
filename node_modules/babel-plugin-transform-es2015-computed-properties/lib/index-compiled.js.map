{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["\"use strict\";\n\nvar _getIterator = require(\"babel-runtime/core-js/get-iterator\")[\"default\"];\n\nexports.__esModule = true;\n\nexports[\"default\"] = function (_ref4) {\n  var t = _ref4.types;\n  var template = _ref4.template;\n\n  var buildMutatorMapAssign = template(\"\\n    MUTATOR_MAP_REF[KEY] = MUTATOR_MAP_REF[KEY] || {};\\n    MUTATOR_MAP_REF[KEY].KIND = VALUE;\\n  \");\n\n  function getValue(prop) {\n    if (t.isObjectProperty(prop)) {\n      return prop.value;\n    } else if (t.isObjectMethod(prop)) {\n      return t.functionExpression(null, prop.params, prop.body, prop.generator, prop.async);\n    }\n  }\n\n  function pushAssign(objId, prop, body) {\n    if (prop.kind === \"get\" && prop.kind === \"set\") {\n      pushMutatorDefine(objId, prop, body);\n    } else {\n      body.push(t.expressionStatement(t.assignmentExpression(\"=\", t.memberExpression(objId, prop.key, prop.computed || t.isLiteral(prop.key)), getValue(prop))));\n    }\n  }\n\n  function pushMutatorDefine(_ref5, prop) {\n    var objId = _ref5.objId;\n    var body = _ref5.body;\n    var getMutatorId = _ref5.getMutatorId;\n    var scope = _ref5.scope;\n\n    var key = !prop.computed && t.isIdentifier(prop.key) ? t.stringLiteral(prop.key.name) : prop.key;\n\n    var maybeMemoise = scope.maybeGenerateMemoised(key);\n    if (maybeMemoise) {\n      body.push(t.expressionStatement(t.assignmentExpression(\"=\", maybeMemoise, key)));\n      key = maybeMemoise;\n    }\n\n    body.push.apply(body, buildMutatorMapAssign({\n      MUTATOR_MAP_REF: getMutatorId(),\n      KEY: key,\n      VALUE: getValue(prop),\n      KIND: t.identifier(prop.kind)\n    }));\n  }\n\n  function loose(info) {\n    for (var _iterator = info.computedProps, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _getIterator(_iterator);;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var prop = _ref;\n\n      if (prop.kind === \"get\" || prop.kind === \"set\") {\n        pushMutatorDefine(info, prop);\n      } else {\n        pushAssign(info.objId, prop, info.body);\n      }\n    }\n  }\n\n  function spec(info) {\n    var objId = info.objId;\n    var body = info.body;\n    var computedProps = info.computedProps;\n    var state = info.state;\n\n    for (var _iterator2 = computedProps, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _getIterator(_iterator2);;) {\n      var _ref2;\n\n      if (_isArray2) {\n        if (_i2 >= _iterator2.length) break;\n        _ref2 = _iterator2[_i2++];\n      } else {\n        _i2 = _iterator2.next();\n        if (_i2.done) break;\n        _ref2 = _i2.value;\n      }\n\n      var prop = _ref2;\n\n      var key = t.toComputedKey(prop);\n\n      if (prop.kind === \"get\" || prop.kind === \"set\") {\n        pushMutatorDefine(info, prop);\n      } else if (t.isStringLiteral(key, { value: \"__proto__\" })) {\n        pushAssign(objId, prop, body);\n      } else {\n        if (computedProps.length === 1) {\n          return t.callExpression(state.addHelper(\"defineProperty\"), [info.initPropExpression, key, getValue(prop)]);\n        } else {\n          body.push(t.expressionStatement(t.callExpression(state.addHelper(\"defineProperty\"), [objId, key, getValue(prop)])));\n        }\n      }\n    }\n  }\n\n  return {\n    visitor: {\n      ObjectExpression: {\n        exit: function exit(path, state) {\n          var node = path.node;\n          var parent = path.parent;\n          var scope = path.scope;\n\n          var hasComputed = false;\n          var _arr = node.properties;\n          for (var _i3 = 0; _i3 < _arr.length; _i3++) {\n            var prop = _arr[_i3];\n            hasComputed = prop.computed === true;\n            if (hasComputed) break;\n          }\n          if (!hasComputed) return;\n\n          // put all getters/setters into the first object expression as well as all initialisers up\n          // to the first computed property\n\n          var initProps = [];\n          var computedProps = [];\n          var foundComputed = false;\n\n          for (var _iterator3 = node.properties, _isArray3 = Array.isArray(_iterator3), _i4 = 0, _iterator3 = _isArray3 ? _iterator3 : _getIterator(_iterator3);;) {\n            var _ref3;\n\n            if (_isArray3) {\n              if (_i4 >= _iterator3.length) break;\n              _ref3 = _iterator3[_i4++];\n            } else {\n              _i4 = _iterator3.next();\n              if (_i4.done) break;\n              _ref3 = _i4.value;\n            }\n\n            var prop = _ref3;\n\n            if (prop.computed) {\n              foundComputed = true;\n            }\n\n            if (foundComputed) {\n              computedProps.push(prop);\n            } else {\n              initProps.push(prop);\n            }\n          }\n\n          var objId = scope.generateUidIdentifierBasedOnNode(parent);\n          var initPropExpression = t.objectExpression(initProps);\n          var body = [];\n\n          body.push(t.variableDeclaration(\"var\", [t.variableDeclarator(objId, initPropExpression)]));\n\n          var callback = spec;\n          if (state.opts.loose) callback = loose;\n\n          var mutatorRef = undefined;\n\n          var getMutatorId = function getMutatorId() {\n            if (!mutatorRef) {\n              mutatorRef = scope.generateUidIdentifier(\"mutatorMap\");\n\n              body.push(t.variableDeclaration(\"var\", [t.variableDeclarator(mutatorRef, t.objectExpression([]))]));\n            }\n\n            return mutatorRef;\n          };\n\n          var single = callback({\n            scope: scope,\n            objId: objId,\n            body: body,\n            computedProps: computedProps,\n            initPropExpression: initPropExpression,\n            getMutatorId: getMutatorId,\n            state: state\n          });\n\n          if (mutatorRef) {\n            body.push(t.expressionStatement(t.callExpression(state.addHelper(\"defineEnumerableProperties\"), [objId, mutatorRef])));\n          }\n\n          if (single) {\n            path.replaceWith(single);\n          } else {\n            body.push(t.expressionStatement(objId));\n            path.replaceWithMultiple(body);\n          }\n        }\n      }\n    }\n  };\n};\n\nmodule.exports = exports[\"default\"];"]}