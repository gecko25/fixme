{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,yBAAyB,QAAQ,+CAAR,EAAyD,SAAzD,CAAzB;;AAEJ,IAAI,0BAA0B,QAAQ,gDAAR,EAA0D,SAA1D,CAA1B;;AAEJ,QAAQ,UAAR,GAAqB,IAArB;;AAEA,IAAI,6BAA6B,QAAQ,8BAAR,CAA7B;;AAEJ,IAAI,8BAA8B,uBAAuB,0BAAvB,CAA9B;;AAEJ,IAAI,cAAc,QAAQ,aAAR,CAAd;;AAEJ,IAAI,IAAI,wBAAwB,WAAxB,CAAJ;;AAEJ,IAAI,UAAU;AACZ,SAAO,SAAS,KAAT,CAAe,IAAf,EAAqB,KAArB,EAA4B;AACjC,QAAI,KAAK,gBAAL,EAAJ,EAA6B;AAC3B,YAAM,SAAN,GAAkB,IAAlB,CAD2B;KAA7B;;AAIA,QAAI,KAAK,sBAAL,CAA4B,EAAE,MAAM,WAAN,EAA9B,CAAJ,EAAwD;AACtD,YAAM,cAAN,GAAuB,IAAvB,CADsD;KAAxD;GALK;;AAUP,YAAU,SAAS,QAAT,CAAkB,IAAlB,EAAwB;AAChC,SAAK,IAAL,GADgC;GAAxB;CAXR;;AAgBJ,QAAQ,SAAR,IAAqB,UAAU,IAAV,EAAgB;AACnC,MAAI,QAAQ,UAAU,MAAV,IAAoB,CAApB,IAAyB,UAAU,CAAV,MAAiB,SAAjB,GAA6B,KAAK,KAAL,GAAa,UAAU,CAAV,CAAnE,CADuB;AAEnC,SAAO,YAAa;AAClB,QAAI,OAAO,KAAK,IAAL,CADO;;AAGlB,QAAI,YAAY,EAAE,kBAAF,CAAqB,IAArB,EAA2B,EAA3B,EAA+B,KAAK,IAAL,EAAW,KAAK,SAAL,EAAgB,KAAK,KAAL,CAAtE,CAHc;;AAKlB,QAAI,SAAS,SAAT,CALc;AAMlB,QAAI,OAAO,EAAP;;;AANc,+BASlB,CAA4B,SAA5B,EAAuC,IAAvC,EAA6C,UAAU,EAAV,EAAc;AACzD,aAAO,MAAM,IAAN,CAAW,EAAE,IAAI,EAAJ,EAAb,CAAP,CADyD;KAAd,CAA7C,CATkB;;AAalB,QAAI,QAAQ;AACV,iBAAW,KAAX;AACA,sBAAgB,KAAhB;KAFE,CAbc;;AAkBlB,SAAK,QAAL,CAAc,OAAd,EAAuB,KAAvB,EAlBkB;;AAoBlB,QAAI,MAAM,cAAN,EAAsB;AACxB,eAAS,EAAE,gBAAF,CAAmB,SAAnB,EAA8B,EAAE,UAAF,CAAa,OAAb,CAA9B,CAAT,CADwB;AAExB,aAAO,EAAP,CAFwB;;AAIxB,UAAI,MAAM,SAAN,EAAiB;AACnB,aAAK,IAAL,CAAU,EAAE,cAAF,EAAV,EADmB;OAArB;;AAIA,UAAI,MAAM,cAAN,EAAsB;AACxB,YAAI,CAAC,MAAM,SAAN,EAAiB,KAAK,IAAL,CAAU,EAAE,WAAF,EAAV,EAAtB;AACA,aAAK,IAAL,CAAU,EAAE,UAAF,CAAa,WAAb,CAAV,EAFwB;OAA1B;KARF;;AAcA,QAAI,OAAO,EAAE,cAAF,CAAiB,MAAjB,EAAyB,IAAzB,CAAP,CAlCc;AAmClB,QAAI,KAAK,SAAL,EAAgB,OAAO,EAAE,eAAF,CAAkB,IAAlB,EAAwB,IAAxB,CAAP,CAApB;;AAEA,WAAO,EAAE,eAAF,CAAkB,IAAlB,CAAP,CArCkB;GAAZ,EAAR,CAFmC;CAAhB;;AA2CrB,OAAO,OAAP,GAAiB,QAAQ,SAAR,CAAjB","file":"index-compiled.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"babel-runtime/helpers/interop-require-default\")[\"default\"];\n\nvar _interopRequireWildcard = require(\"babel-runtime/helpers/interop-require-wildcard\")[\"default\"];\n\nexports.__esModule = true;\n\nvar _babelHelperHoistVariables = require(\"babel-helper-hoist-variables\");\n\nvar _babelHelperHoistVariables2 = _interopRequireDefault(_babelHelperHoistVariables);\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nvar visitor = {\n  enter: function enter(path, state) {\n    if (path.isThisExpression()) {\n      state.foundThis = true;\n    }\n\n    if (path.isReferencedIdentifier({ name: \"arguments\" })) {\n      state.foundArguments = true;\n    }\n  },\n\n  Function: function Function(path) {\n    path.skip();\n  }\n};\n\nexports[\"default\"] = function (path) {\n  var scope = arguments.length <= 1 || arguments[1] === undefined ? path.scope : arguments[1];\n  return (function () {\n    var node = path.node;\n\n    var container = t.functionExpression(null, [], node.body, node.generator, node.async);\n\n    var callee = container;\n    var args = [];\n\n    // todo: only hoist if necessary\n    _babelHelperHoistVariables2[\"default\"](path, function (id) {\n      return scope.push({ id: id });\n    });\n\n    var state = {\n      foundThis: false,\n      foundArguments: false\n    };\n\n    path.traverse(visitor, state);\n\n    if (state.foundArguments) {\n      callee = t.memberExpression(container, t.identifier(\"apply\"));\n      args = [];\n\n      if (state.foundThis) {\n        args.push(t.thisExpression());\n      }\n\n      if (state.foundArguments) {\n        if (!state.foundThis) args.push(t.nullLiteral());\n        args.push(t.identifier(\"arguments\"));\n      }\n    }\n\n    var call = t.callExpression(callee, args);\n    if (node.generator) call = t.yieldExpression(call, true);\n\n    return t.returnStatement(call);\n  })();\n};\n\nmodule.exports = exports[\"default\"];"]}