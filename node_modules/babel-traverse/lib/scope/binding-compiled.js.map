{"version":3,"sources":["binding.js"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;;AAEA,IAAI,kBAAkB,QAAQ,wCAAR,EAAkD,SAAlD,CAAlB;;AAEJ,QAAQ,UAAR,GAAqB,IAArB;;AAEA,IAAI,UAAU,YAAa;AACzB,WAAS,OAAT,CAAiB,IAAjB,EAAuB;AACrB,QAAI,WAAW,KAAK,QAAL,CADM;AAErB,QAAI,aAAa,KAAK,UAAL,CAFI;AAGrB,QAAI,QAAQ,KAAK,KAAL,CAHS;AAIrB,QAAI,OAAO,KAAK,IAAL,CAJU;AAKrB,QAAI,OAAO,KAAK,IAAL,CALU;;AAOrB,oBAAgB,IAAhB,EAAsB,OAAtB,EAPqB;;AASrB,SAAK,UAAL,GAAkB,UAAlB,CATqB;AAUrB,SAAK,KAAL,GAAa,KAAb,CAVqB;AAWrB,SAAK,IAAL,GAAY,IAAZ,CAXqB;AAYrB,SAAK,IAAL,GAAY,IAAZ,CAZqB;;AAcrB,SAAK,kBAAL,GAA0B,EAA1B,CAdqB;AAerB,SAAK,QAAL,GAAgB,IAAhB,CAfqB;;AAiBrB,SAAK,cAAL,GAAsB,EAAtB,CAjBqB;AAkBrB,SAAK,UAAL,GAAkB,KAAlB,CAlBqB;AAmBrB,SAAK,UAAL,GAAkB,CAAlB,CAnBqB;;AAqBrB,SAAK,UAAL,GArBqB;;AAuBrB,QAAI,QAAJ,EAAc;AACZ,WAAK,kBAAL,GAA0B,GAAG,MAAH,CAAU,SAAS,IAAT,EAAe,SAAS,kBAAT,EAA6B,KAAK,kBAAL,CAAhF,CADY;KAAd;GAvBF;;AA4BA,UAAQ,SAAR,CAAkB,UAAlB,GAA+B,SAAS,UAAT,GAAsB;AACnD,SAAK,UAAL,GADmD;AAEnD,SAAK,eAAL,GAAuB,IAAvB,CAFmD;GAAtB,CA7BN;;AAkCzB,UAAQ,SAAR,CAAkB,QAAlB,GAA6B,SAAS,QAAT,CAAkB,KAAlB,EAAyB;AACpD,QAAI,KAAK,eAAL,EAAsB,OAA1B;AACA,SAAK,QAAL,GAAgB,IAAhB,CAFoD;AAGpD,SAAK,KAAL,GAAa,KAAb,CAHoD;GAAzB,CAlCJ;;AAwCzB,UAAQ,SAAR,CAAkB,UAAlB,GAA+B,SAAS,UAAT,GAAsB;AACnD,SAAK,eAAL,GAAuB,KAAvB,CADmD;AAEnD,SAAK,QAAL,GAAgB,KAAhB,CAFmD;AAGnD,SAAK,KAAL,GAAa,IAAb,CAHmD;GAAtB;;;;;;AAxCN,SAkDzB,CAAQ,SAAR,CAAkB,QAAlB,GAA6B,SAAS,QAAT,CAAkB,IAAlB,EAAwB;AACnD,SAAK,QAAL,GAAgB,KAAhB,CADmD;AAEnD,QAAI,KAAK,kBAAL,CAAwB,OAAxB,CAAgC,IAAhC,MAA0C,CAAC,CAAD,EAAI;AAChD,aADgD;KAAlD;AAGA,SAAK,kBAAL,CAAwB,IAAxB,CAA6B,IAA7B,EALmD;GAAxB;;;;;;AAlDJ,SA8DzB,CAAQ,SAAR,CAAkB,SAAlB,GAA8B,SAAS,SAAT,CAAmB,IAAnB,EAAyB;AACrD,SAAK,UAAL,GAAkB,IAAlB,CADqD;AAErD,SAAK,UAAL,GAFqD;AAGrD,SAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,EAHqD;GAAzB;;;;;;AA9DL,SAwEzB,CAAQ,SAAR,CAAkB,WAAlB,GAAgC,SAAS,WAAT,GAAuB;AACrD,SAAK,UAAL,GADqD;AAErD,SAAK,UAAL,GAAkB,CAAC,CAAC,KAAK,UAAL,CAFiC;GAAvB,CAxEP;;AA6EzB,SAAO,OAAP,CA7EyB;CAAZ,EAAX;;AAgFJ,QAAQ,SAAR,IAAqB,OAArB;AACA,OAAO,OAAP,GAAiB,QAAQ,SAAR,CAAjB","file":"binding-compiled.js","sourcesContent":["\n\n/**\n * This class is responsible for a binding inside of a scope.\n *\n * It tracks the following:\n *\n *  * Node path.\n *  * Amount of times referenced by other nodes.\n *  * Paths to nodes that reassign or modify this binding.\n *  * The kind of binding. (Is it a parameter, declaration etc)\n */\n\n\"use strict\";\n\nvar _classCallCheck = require(\"babel-runtime/helpers/class-call-check\")[\"default\"];\n\nexports.__esModule = true;\n\nvar Binding = (function () {\n  function Binding(_ref) {\n    var existing = _ref.existing;\n    var identifier = _ref.identifier;\n    var scope = _ref.scope;\n    var path = _ref.path;\n    var kind = _ref.kind;\n\n    _classCallCheck(this, Binding);\n\n    this.identifier = identifier;\n    this.scope = scope;\n    this.path = path;\n    this.kind = kind;\n\n    this.constantViolations = [];\n    this.constant = true;\n\n    this.referencePaths = [];\n    this.referenced = false;\n    this.references = 0;\n\n    this.clearValue();\n\n    if (existing) {\n      this.constantViolations = [].concat(existing.path, existing.constantViolations, this.constantViolations);\n    }\n  }\n\n  Binding.prototype.deoptValue = function deoptValue() {\n    this.clearValue();\n    this.hasDeoptedValue = true;\n  };\n\n  Binding.prototype.setValue = function setValue(value) {\n    if (this.hasDeoptedValue) return;\n    this.hasValue = true;\n    this.value = value;\n  };\n\n  Binding.prototype.clearValue = function clearValue() {\n    this.hasDeoptedValue = false;\n    this.hasValue = false;\n    this.value = null;\n  };\n\n  /**\n   * Register a constant violation with the provided `path`.\n   */\n\n  Binding.prototype.reassign = function reassign(path) {\n    this.constant = false;\n    if (this.constantViolations.indexOf(path) !== -1) {\n      return;\n    }\n    this.constantViolations.push(path);\n  };\n\n  /**\n   * Increment the amount of references to this binding.\n   */\n\n  Binding.prototype.reference = function reference(path) {\n    this.referenced = true;\n    this.references++;\n    this.referencePaths.push(path);\n  };\n\n  /**\n   * Decrement the amount of references to this binding.\n   */\n\n  Binding.prototype.dereference = function dereference() {\n    this.references--;\n    this.referenced = !!this.references;\n  };\n\n  return Binding;\n})();\n\nexports[\"default\"] = Binding;\nmodule.exports = exports[\"default\"];"]}