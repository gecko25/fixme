{"version":3,"sources":["leap.js"],"names":[],"mappings":"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","file":"leap-compiled.js","sourcesContent":["/**\n * Copyright (c) 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * https://raw.github.com/facebook/regenerator/master/LICENSE file. An\n * additional grant of patent rights can be found in the PATENTS file in\n * the same directory.\n */\n\nimport assert from \"assert\";\nimport * as t from \"babel-types\";\nimport { inherits } from \"util\";\n\nfunction Entry() {\n  assert.ok(this instanceof Entry);\n}\n\nfunction FunctionEntry(returnLoc) {\n  Entry.call(this);\n  t.assertLiteral(returnLoc);\n  this.returnLoc = returnLoc;\n}\n\ninherits(FunctionEntry, Entry);\nexports.FunctionEntry = FunctionEntry;\n\nfunction LoopEntry(breakLoc, continueLoc, label) {\n  Entry.call(this);\n\n  t.assertLiteral(breakLoc);\n  t.assertLiteral(continueLoc);\n\n  if (label) {\n    t.assertIdentifier(label);\n  } else {\n    label = null;\n  }\n\n  this.breakLoc = breakLoc;\n  this.continueLoc = continueLoc;\n  this.label = label;\n}\n\ninherits(LoopEntry, Entry);\nexports.LoopEntry = LoopEntry;\n\nfunction SwitchEntry(breakLoc) {\n  Entry.call(this);\n  t.assertLiteral(breakLoc);\n  this.breakLoc = breakLoc;\n}\n\ninherits(SwitchEntry, Entry);\nexports.SwitchEntry = SwitchEntry;\n\nfunction TryEntry(firstLoc, catchEntry, finallyEntry) {\n  Entry.call(this);\n\n  t.assertLiteral(firstLoc);\n\n  if (catchEntry) {\n    assert.ok(catchEntry instanceof CatchEntry);\n  } else {\n    catchEntry = null;\n  }\n\n  if (finallyEntry) {\n    assert.ok(finallyEntry instanceof FinallyEntry);\n  } else {\n    finallyEntry = null;\n  }\n\n  // Have to have one or the other (or both).\n  assert.ok(catchEntry || finallyEntry);\n\n  this.firstLoc = firstLoc;\n  this.catchEntry = catchEntry;\n  this.finallyEntry = finallyEntry;\n}\n\ninherits(TryEntry, Entry);\nexports.TryEntry = TryEntry;\n\nfunction CatchEntry(firstLoc, paramId) {\n  Entry.call(this);\n\n  t.assertLiteral(firstLoc);\n  t.assertIdentifier(paramId);\n\n  this.firstLoc = firstLoc;\n  this.paramId = paramId;\n}\n\ninherits(CatchEntry, Entry);\nexports.CatchEntry = CatchEntry;\n\nfunction FinallyEntry(firstLoc, afterLoc) {\n  Entry.call(this);\n  t.assertLiteral(firstLoc);\n  t.assertLiteral(afterLoc);\n  this.firstLoc = firstLoc;\n  this.afterLoc = afterLoc;\n}\n\ninherits(FinallyEntry, Entry);\nexports.FinallyEntry = FinallyEntry;\n\nfunction LabeledEntry(breakLoc, label) {\n  Entry.call(this);\n\n  t.assertLiteral(breakLoc);\n  t.assertIdentifier(label);\n\n  this.breakLoc = breakLoc;\n  this.label = label;\n}\n\ninherits(LabeledEntry, Entry);\nexports.LabeledEntry = LabeledEntry;\n\nfunction LeapManager(emitter) {\n  assert.ok(this instanceof LeapManager);\n\n  let Emitter = require(\"./emit\").Emitter;\n  assert.ok(emitter instanceof Emitter);\n\n  this.emitter = emitter;\n  this.entryStack = [new FunctionEntry(emitter.finalLoc)];\n}\n\nlet LMp = LeapManager.prototype;\nexports.LeapManager = LeapManager;\n\nLMp.withEntry = function(entry, callback) {\n  assert.ok(entry instanceof Entry);\n  this.entryStack.push(entry);\n  try {\n    callback.call(this.emitter);\n  } finally {\n    let popped = this.entryStack.pop();\n    assert.strictEqual(popped, entry);\n  }\n};\n\nLMp._findLeapLocation = function(property, label) {\n  for (let i = this.entryStack.length - 1; i >= 0; --i) {\n    let entry = this.entryStack[i];\n    let loc = entry[property];\n    if (loc) {\n      if (label) {\n        if (entry.label &&\n            entry.label.name === label.name) {\n          return loc;\n        }\n      } else if (entry instanceof LabeledEntry) {\n        // Ignore LabeledEntry entries unless we are actually breaking to\n        // a label.\n      } else {\n        return loc;\n      }\n    }\n  }\n\n  return null;\n};\n\nLMp.getBreakLoc = function(label) {\n  return this._findLeapLocation(\"breakLoc\", label);\n};\n\nLMp.getContinueLoc = function(label) {\n  return this._findLeapLocation(\"continueLoc\", label);\n};\n"]}