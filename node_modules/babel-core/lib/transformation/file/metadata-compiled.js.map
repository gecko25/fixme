{"version":3,"sources":["metadata.js"],"names":[],"mappings":"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","file":"metadata-compiled.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"babel-runtime/helpers/interop-require-wildcard\")[\"default\"];\n\nexports.__esModule = true;\nexports.ExportDeclaration = ExportDeclaration;\nexports.Scope = Scope;\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nvar ModuleDeclaration = {\n  enter: function enter(path, file) {\n    var node = path.node;\n\n    if (node.source) {\n      node.source.value = file.resolveModuleSource(node.source.value);\n    }\n  }\n};\n\nexports.ModuleDeclaration = ModuleDeclaration;\nvar ImportDeclaration = {\n  exit: function exit(path, file) {\n    var node = path.node;\n\n    var specifiers = [];\n    var imported = [];\n    file.metadata.modules.imports.push({\n      source: node.source.value,\n      imported: imported,\n      specifiers: specifiers\n    });\n\n    var _arr = path.get(\"specifiers\");\n\n    for (var _i = 0; _i < _arr.length; _i++) {\n      var specifier = _arr[_i];\n      var local = specifier.node.local.name;\n\n      if (specifier.isImportDefaultSpecifier()) {\n        imported.push(\"default\");\n        specifiers.push({\n          kind: \"named\",\n          imported: \"default\",\n          local: local\n        });\n      }\n\n      if (specifier.isImportSpecifier()) {\n        var importedName = specifier.node.imported.name;\n        imported.push(importedName);\n        specifiers.push({\n          kind: \"named\",\n          imported: importedName,\n          local: local\n        });\n      }\n\n      if (specifier.isImportNamespaceSpecifier()) {\n        imported.push(\"*\");\n        specifiers.push({\n          kind: \"namespace\",\n          local: local\n        });\n      }\n    }\n  }\n};\n\nexports.ImportDeclaration = ImportDeclaration;\n\nfunction ExportDeclaration(path, file) {\n  var node = path.node;\n\n  var source = node.source ? node.source.value : null;\n  var exports = file.metadata.modules.exports;\n\n  // export function foo() {}\n  // export let foo = \"bar\";\n  var declar = path.get(\"declaration\");\n  if (declar.isStatement()) {\n    var bindings = declar.getBindingIdentifiers();\n\n    for (var _name in bindings) {\n      exports.exported.push(_name);\n      exports.specifiers.push({\n        kind: \"local\",\n        local: _name,\n        exported: path.isExportDefaultDeclaration() ? \"default\" : _name\n      });\n    }\n  }\n\n  if (path.isExportNamedDeclaration() && node.specifiers) {\n    var _arr2 = node.specifiers;\n\n    for (var _i2 = 0; _i2 < _arr2.length; _i2++) {\n      var specifier = _arr2[_i2];\n      var exported = specifier.exported.name;\n      exports.exported.push(exported);\n\n      // export foo from \"bar\";\n      if (t.isExportDefaultSpecifier(specifier)) {\n        exports.specifiers.push({\n          kind: \"external\",\n          local: exported,\n          exported: exported,\n          source: source\n        });\n      }\n\n      // export * as foo from \"bar\";\n      if (t.isExportNamespaceSpecifier(specifier)) {\n        exports.specifiers.push({\n          kind: \"external-namespace\",\n          exported: exported,\n          source: source\n        });\n      }\n\n      var local = specifier.local;\n      if (!local) continue;\n\n      // export { foo } from \"bar\";\n      // export { foo as bar } from \"bar\";\n      if (source) {\n        exports.specifiers.push({\n          kind: \"external\",\n          local: local.name,\n          exported: exported,\n          source: source\n        });\n      }\n\n      // export { foo };\n      // export { foo as bar };\n      if (!source) {\n        exports.specifiers.push({\n          kind: \"local\",\n          local: local.name,\n          exported: exported\n        });\n      }\n    }\n  }\n\n  // export * from \"bar\";\n  if (path.isExportAllDeclaration()) {\n    exports.specifiers.push({\n      kind: \"external-all\",\n      source: source\n    });\n  }\n}\n\nfunction Scope(path) {\n  path.skip();\n}"]}