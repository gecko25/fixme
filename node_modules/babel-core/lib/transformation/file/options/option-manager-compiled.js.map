{"version":3,"sources":["option-manager.js"],"names":[],"mappings":"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","file":"option-manager-compiled.js","sourcesContent":["/* eslint max-len: 0 */\n\n\"use strict\";\n\nvar _classCallCheck = require(\"babel-runtime/helpers/class-call-check\")[\"default\"];\n\nvar _Object$assign = require(\"babel-runtime/core-js/object/assign\")[\"default\"];\n\nvar _interopRequireWildcard = require(\"babel-runtime/helpers/interop-require-wildcard\")[\"default\"];\n\nvar _interopRequireDefault = require(\"babel-runtime/helpers/interop-require-default\")[\"default\"];\n\nexports.__esModule = true;\n\nvar _apiNode = require(\"../../../api/node\");\n\nvar context = _interopRequireWildcard(_apiNode);\n\nvar _plugin2 = require(\"../../plugin\");\n\nvar _plugin3 = _interopRequireDefault(_plugin2);\n\nvar _babelMessages = require(\"babel-messages\");\n\nvar messages = _interopRequireWildcard(_babelMessages);\n\nvar _index = require(\"./index\");\n\nvar _helpersResolve = require(\"../../../helpers/resolve\");\n\nvar _helpersResolve2 = _interopRequireDefault(_helpersResolve);\n\nvar _json5 = require(\"json5\");\n\nvar _json52 = _interopRequireDefault(_json5);\n\nvar _pathIsAbsolute = require(\"path-is-absolute\");\n\nvar _pathIsAbsolute2 = _interopRequireDefault(_pathIsAbsolute);\n\nvar _pathExists = require(\"path-exists\");\n\nvar _pathExists2 = _interopRequireDefault(_pathExists);\n\nvar _lodashLangCloneDeep = require(\"lodash/lang/cloneDeep\");\n\nvar _lodashLangCloneDeep2 = _interopRequireDefault(_lodashLangCloneDeep);\n\nvar _lodashLangClone = require(\"lodash/lang/clone\");\n\nvar _lodashLangClone2 = _interopRequireDefault(_lodashLangClone);\n\nvar _helpersMerge = require(\"../../../helpers/merge\");\n\nvar _helpersMerge2 = _interopRequireDefault(_helpersMerge);\n\nvar _config = require(\"./config\");\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _removed = require(\"./removed\");\n\nvar _removed2 = _interopRequireDefault(_removed);\n\nvar _path = require(\"path\");\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _fs = require(\"fs\");\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nvar existsCache = {};\nvar jsonCache = {};\n\nvar BABELIGNORE_FILENAME = \".babelignore\";\nvar BABELRC_FILENAME = \".babelrc\";\nvar PACKAGE_FILENAME = \"package.json\";\n\nfunction exists(filename) {\n  var cached = existsCache[filename];\n  if (cached == null) {\n    return existsCache[filename] = _pathExists2[\"default\"].sync(filename);\n  } else {\n    return cached;\n  }\n}\n\nvar OptionManager = (function () {\n  function OptionManager(log) {\n    _classCallCheck(this, OptionManager);\n\n    this.resolvedConfigs = [];\n    this.options = OptionManager.createBareOptions();\n    this.log = log;\n  }\n\n  OptionManager.memoisePluginContainer = function memoisePluginContainer(fn, loc, i, alias) {\n    var _arr = OptionManager.memoisedPlugins;\n\n    for (var _i = 0; _i < _arr.length; _i++) {\n      var cache = _arr[_i];\n      if (cache.container === fn) return cache.plugin;\n    }\n\n    var obj = undefined;\n\n    if (typeof fn === \"function\") {\n      obj = fn(context);\n    } else {\n      obj = fn;\n    }\n\n    if (typeof obj === \"object\") {\n      var _plugin = new _plugin3[\"default\"](obj, alias);\n      OptionManager.memoisedPlugins.push({\n        container: fn,\n        plugin: _plugin\n      });\n      return _plugin;\n    } else {\n      throw new TypeError(messages.get(\"pluginNotObject\", loc, i, typeof obj) + loc + i);\n    }\n  };\n\n  OptionManager.createBareOptions = function createBareOptions() {\n    var opts = {};\n\n    for (var _key in _config2[\"default\"]) {\n      var opt = _config2[\"default\"][_key];\n      opts[_key] = _lodashLangClone2[\"default\"](opt[\"default\"]);\n    }\n\n    return opts;\n  };\n\n  OptionManager.normalisePlugin = function normalisePlugin(plugin, loc, i, alias) {\n    plugin = plugin.__esModule ? plugin[\"default\"] : plugin;\n\n    if (!(plugin instanceof _plugin3[\"default\"])) {\n      // allow plugin containers to be specified so they don't have to manually require\n      if (typeof plugin === \"function\" || typeof plugin === \"object\") {\n        plugin = OptionManager.memoisePluginContainer(plugin, loc, i, alias);\n      } else {\n        throw new TypeError(messages.get(\"pluginNotFunction\", loc, i, typeof plugin));\n      }\n    }\n\n    plugin.init(loc, i);\n\n    return plugin;\n  };\n\n  OptionManager.normalisePlugins = function normalisePlugins(loc, dirname, plugins) {\n    return plugins.map(function (val, i) {\n      var plugin = undefined,\n          options = undefined;\n\n      if (!val) {\n        throw new TypeError(\"Falsy value found in plugins\");\n      }\n\n      // destructure plugins\n      if (Array.isArray(val)) {\n        plugin = val[0];\n        options = val[1];\n      } else {\n        plugin = val;\n      }\n\n      var alias = typeof plugin === \"string\" ? plugin : loc + \"$\" + i;\n\n      // allow plugins to be specified as strings\n      if (typeof plugin === \"string\") {\n        var pluginLoc = _helpersResolve2[\"default\"](\"babel-plugin-\" + plugin, dirname) || _helpersResolve2[\"default\"](plugin, dirname);\n        if (pluginLoc) {\n          plugin = require(pluginLoc);\n        } else {\n          throw new ReferenceError(messages.get(\"pluginUnknown\", plugin, loc, i, dirname));\n        }\n      }\n\n      plugin = OptionManager.normalisePlugin(plugin, loc, i, alias);\n\n      return [plugin, options];\n    });\n  };\n\n  OptionManager.prototype.addConfig = function addConfig(loc, key) {\n    var json = arguments.length <= 2 || arguments[2] === undefined ? _json52[\"default\"] : arguments[2];\n\n    if (this.resolvedConfigs.indexOf(loc) >= 0) {\n      return false;\n    }\n\n    var content = _fs2[\"default\"].readFileSync(loc, \"utf8\");\n    var opts = undefined;\n\n    try {\n      opts = jsonCache[content] = jsonCache[content] || json.parse(content);\n      if (key) opts = opts[key];\n    } catch (err) {\n      err.message = loc + \": Error while parsing JSON - \" + err.message;\n      throw err;\n    }\n\n    this.mergeOptions({\n      options: opts,\n      alias: loc,\n      dirname: _path2[\"default\"].dirname(loc)\n    });\n    this.resolvedConfigs.push(loc);\n\n    return !!opts;\n  };\n\n  /**\n   * This is called when we want to merge the input `opts` into the\n   * base options (passed as the `extendingOpts`: at top-level it's the\n   * main options, at presets level it's presets options).\n   *\n   *  - `alias` is used to output pretty traces back to the original source.\n   *  - `loc` is used to point to the original config.\n   *  - `dirname` is used to resolve plugins relative to it.\n   */\n\n  OptionManager.prototype.mergeOptions = function mergeOptions(_ref) {\n    // istanbul ignore next\n\n    var _this = this;\n\n    var rawOpts = _ref.options;\n    var extendingOpts = _ref.extending;\n    var alias = _ref.alias;\n    var loc = _ref.loc;\n    var dirname = _ref.dirname;\n\n    alias = alias || \"foreign\";\n    if (!rawOpts) return;\n\n    //\n    if (typeof rawOpts !== \"object\" || Array.isArray(rawOpts)) {\n      this.log.error(\"Invalid options type for \" + alias, TypeError);\n    }\n\n    //\n    var opts = _lodashLangCloneDeep2[\"default\"](rawOpts, function (val) {\n      if (val instanceof _plugin3[\"default\"]) {\n        return val;\n      }\n    });\n\n    //\n    dirname = dirname || process.cwd();\n    loc = loc || alias;\n\n    for (var _key2 in opts) {\n      var option = _config2[\"default\"][_key2];\n\n      // check for an unknown option\n      if (!option && this.log) {\n        var pluginOptsInfo = \"Check out http://babeljs.io/docs/usage/options/ for more info\";\n\n        if (_removed2[\"default\"][_key2]) {\n          this.log.error(\"Using removed Babel 5 option: \" + alias + \".\" + _key2 + \" - \" + _removed2[\"default\"][_key2].message, ReferenceError);\n        } else {\n          this.log.error(\"Unknown option: \" + alias + \".\" + _key2 + \". \" + pluginOptsInfo, ReferenceError);\n        }\n      }\n    }\n\n    // normalise options\n    _index.normaliseOptions(opts);\n\n    // resolve plugins\n    if (opts.plugins) {\n      opts.plugins = OptionManager.normalisePlugins(loc, dirname, opts.plugins);\n    }\n\n    // add extends clause\n    if (opts[\"extends\"]) {\n      var extendsLoc = _helpersResolve2[\"default\"](opts[\"extends\"], dirname);\n      if (extendsLoc) {\n        this.addConfig(extendsLoc);\n      } else {\n        if (this.log) this.log.error(\"Couldn't resolve extends clause of \" + opts[\"extends\"] + \" in \" + alias);\n      }\n      delete opts[\"extends\"];\n    }\n\n    // resolve presets\n    if (opts.presets) {\n      // If we're in the \"pass per preset\" mode, we resolve the presets\n      // and keep them for further execution to calculate the options.\n      if (opts.passPerPreset) {\n        opts.presets = this.resolvePresets(opts.presets, dirname, function (preset, presetLoc) {\n          _this.mergeOptions({\n            options: preset,\n            extending: preset,\n            alias: presetLoc,\n            loc: presetLoc,\n            dirname: dirname\n          });\n        });\n      } else {\n        // Otherwise, just merge presets options into the main options.\n        this.mergePresets(opts.presets, dirname);\n        delete opts.presets;\n      }\n    }\n\n    // env\n    var envOpts = undefined;\n    var envKey = process.env.BABEL_ENV || process.env.NODE_ENV || \"development\";\n    if (opts.env) {\n      envOpts = opts.env[envKey];\n      delete opts.env;\n    }\n\n    // Merge them into current extending options in case of top-level\n    // options. In case of presets, just re-assign options which are got\n    // normalized during the `mergeOptions`.\n    if (rawOpts === extendingOpts) {\n      _Object$assign(extendingOpts, opts);\n    } else {\n      _helpersMerge2[\"default\"](extendingOpts || this.options, opts);\n    }\n\n    // merge in env options\n    this.mergeOptions({\n      options: envOpts,\n      extending: extendingOpts,\n      alias: alias + \".env.\" + envKey,\n      dirname: dirname\n    });\n  };\n\n  /**\n   * Merges all presets into the main options in case we are not in the\n   * \"pass per preset\" mode. Otherwise, options are calculated per preset.\n   */\n\n  OptionManager.prototype.mergePresets = function mergePresets(presets, dirname) {\n    // istanbul ignore next\n\n    var _this2 = this;\n\n    this.resolvePresets(presets, dirname, function (presetOpts, presetLoc) {\n      _this2.mergeOptions({\n        options: presetOpts,\n        alias: presetLoc,\n        loc: presetLoc,\n        dirname: _path2[\"default\"].dirname(presetLoc)\n      });\n    });\n  };\n\n  /**\n   * Resolves presets options which can be either direct object data,\n   * or a module name to require.\n   */\n\n  OptionManager.prototype.resolvePresets = function resolvePresets(presets, dirname, onResolve) {\n    return presets.map(function (val) {\n      if (typeof val === \"string\") {\n        var presetLoc = _helpersResolve2[\"default\"](\"babel-preset-\" + val, dirname) || _helpersResolve2[\"default\"](val, dirname);\n        if (presetLoc) {\n          var _val = require(presetLoc);\n          onResolve && onResolve(_val, presetLoc);\n          return _val;\n        } else {\n          throw new Error(\"Couldn't find preset \" + JSON.stringify(val) + \" relative to directory \" + JSON.stringify(dirname));\n        }\n      } else if (typeof val === \"object\") {\n        onResolve && onResolve(val);\n        return val;\n      } else {\n        throw new Error(\"Unsupported preset format: \" + val + \".\");\n      }\n    });\n  };\n\n  OptionManager.prototype.addIgnoreConfig = function addIgnoreConfig(loc) {\n    var file = _fs2[\"default\"].readFileSync(loc, \"utf8\");\n    var lines = file.split(\"\\n\");\n\n    lines = lines.map(function (line) {\n      return line.replace(/#(.*?)$/, \"\").trim();\n    }).filter(function (line) {\n      return !!line;\n    });\n\n    this.mergeOptions({\n      options: { ignore: lines },\n      loc: loc\n    });\n  };\n\n  OptionManager.prototype.findConfigs = function findConfigs(loc) {\n    if (!loc) return;\n\n    if (!_pathIsAbsolute2[\"default\"](loc)) {\n      loc = _path2[\"default\"].join(process.cwd(), loc);\n    }\n\n    var foundConfig = false;\n    var foundIgnore = false;\n\n    while (loc !== (loc = _path2[\"default\"].dirname(loc))) {\n      if (!foundConfig) {\n        var configLoc = _path2[\"default\"].join(loc, BABELRC_FILENAME);\n        if (exists(configLoc)) {\n          this.addConfig(configLoc);\n          foundConfig = true;\n        }\n\n        var pkgLoc = _path2[\"default\"].join(loc, PACKAGE_FILENAME);\n        if (!foundConfig && exists(pkgLoc)) {\n          foundConfig = this.addConfig(pkgLoc, \"babel\", JSON);\n        }\n      }\n\n      if (!foundIgnore) {\n        var ignoreLoc = _path2[\"default\"].join(loc, BABELIGNORE_FILENAME);\n        if (exists(ignoreLoc)) {\n          this.addIgnoreConfig(ignoreLoc);\n          foundIgnore = true;\n        }\n      }\n\n      if (foundIgnore && foundConfig) return;\n    }\n  };\n\n  OptionManager.prototype.normaliseOptions = function normaliseOptions() {\n    var opts = this.options;\n\n    for (var _key3 in _config2[\"default\"]) {\n      var option = _config2[\"default\"][_key3];\n      var val = opts[_key3];\n\n      // optional\n      if (!val && option.optional) continue;\n\n      // aliases\n      if (option.alias) {\n        opts[option.alias] = opts[option.alias] || val;\n      } else {\n        opts[_key3] = val;\n      }\n    }\n  };\n\n  OptionManager.prototype.init = function init() {\n    var opts = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    var filename = opts.filename;\n\n    // resolve all .babelrc files\n    if (opts.babelrc !== false) {\n      this.findConfigs(filename);\n    }\n\n    // merge in base options\n    this.mergeOptions({\n      options: opts,\n      alias: \"base\",\n      dirname: filename && _path2[\"default\"].dirname(filename)\n    });\n\n    // normalise\n    this.normaliseOptions(opts);\n\n    return this.options;\n  };\n\n  return OptionManager;\n})();\n\nexports[\"default\"] = OptionManager;\n\nOptionManager.memoisedPlugins = [];\nmodule.exports = exports[\"default\"];"]}