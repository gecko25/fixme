{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["/* global BabelFileResult, BabelParserOptions, BabelFileMetadata */\n/* eslint max-len: 0 */\n\n\"use strict\";\n\nvar _inherits = require(\"babel-runtime/helpers/inherits\")[\"default\"];\n\nvar _classCallCheck = require(\"babel-runtime/helpers/class-call-check\")[\"default\"];\n\nvar _Object$assign = require(\"babel-runtime/core-js/object/assign\")[\"default\"];\n\nvar _Object$create = require(\"babel-runtime/core-js/object/create\")[\"default\"];\n\nvar _interopRequireDefault = require(\"babel-runtime/helpers/interop-require-default\")[\"default\"];\n\nvar _interopRequireWildcard = require(\"babel-runtime/helpers/interop-require-wildcard\")[\"default\"];\n\nexports.__esModule = true;\n\nvar _babelHelpers = require(\"babel-helpers\");\n\nvar _babelHelpers2 = _interopRequireDefault(_babelHelpers);\n\nvar _metadata = require(\"./metadata\");\n\nvar metadataVisitor = _interopRequireWildcard(_metadata);\n\nvar _convertSourceMap = require(\"convert-source-map\");\n\nvar _convertSourceMap2 = _interopRequireDefault(_convertSourceMap);\n\nvar _optionsOptionManager = require(\"./options/option-manager\");\n\nvar _optionsOptionManager2 = _interopRequireDefault(_optionsOptionManager);\n\nvar _pluginPass = require(\"../plugin-pass\");\n\nvar _pluginPass2 = _interopRequireDefault(_pluginPass);\n\nvar _shebangRegex = require(\"shebang-regex\");\n\nvar _shebangRegex2 = _interopRequireDefault(_shebangRegex);\n\nvar _babelTraverse = require(\"babel-traverse\");\n\nvar _sourceMap = require(\"source-map\");\n\nvar _sourceMap2 = _interopRequireDefault(_sourceMap);\n\nvar _babelGenerator = require(\"babel-generator\");\n\nvar _babelGenerator2 = _interopRequireDefault(_babelGenerator);\n\nvar _babelCodeFrame = require(\"babel-code-frame\");\n\nvar _babelCodeFrame2 = _interopRequireDefault(_babelCodeFrame);\n\nvar _lodashObjectDefaults = require(\"lodash/object/defaults\");\n\nvar _lodashObjectDefaults2 = _interopRequireDefault(_lodashObjectDefaults);\n\nvar _babelTraverse2 = _interopRequireDefault(_babelTraverse);\n\nvar _logger = require(\"./logger\");\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _store = require(\"../../store\");\n\nvar _store2 = _interopRequireDefault(_store);\n\nvar _babylon = require(\"babylon\");\n\nvar _util = require(\"../../util\");\n\nvar util = _interopRequireWildcard(_util);\n\nvar _path = require(\"path\");\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nvar _internalPluginsBlockHoist = require(\"../internal-plugins/block-hoist\");\n\nvar _internalPluginsBlockHoist2 = _interopRequireDefault(_internalPluginsBlockHoist);\n\nvar _internalPluginsShadowFunctions = require(\"../internal-plugins/shadow-functions\");\n\nvar _internalPluginsShadowFunctions2 = _interopRequireDefault(_internalPluginsShadowFunctions);\n\nvar INTERNAL_PLUGINS = [[_internalPluginsBlockHoist2[\"default\"]], [_internalPluginsShadowFunctions2[\"default\"]]];\n\nvar errorVisitor = {\n  enter: function enter(path, state) {\n    var loc = path.node.loc;\n    if (loc) {\n      state.loc = loc;\n      path.stop();\n    }\n  }\n};\n\nvar File = (function (_Store) {\n  _inherits(File, _Store);\n\n  function File(opts, pipeline) {\n    // istanbul ignore next\n\n    var _this = this;\n\n    if (opts === undefined) opts = {};\n\n    _classCallCheck(this, File);\n\n    _Store.call(this);\n\n    this.pipeline = pipeline;\n\n    this.log = new _logger2[\"default\"](this, opts.filename || \"unknown\");\n    this.opts = this.initOptions(opts);\n\n    this.parserOpts = {\n      highlightCode: this.opts.highlightCode,\n      nonStandard: this.opts.nonStandard,\n      sourceType: this.opts.sourceType,\n      filename: this.opts.filename,\n      plugins: []\n    };\n\n    this.pluginVisitors = [];\n    this.pluginPasses = [];\n\n    // Plugins for top-level options.\n    this.buildPluginsForOptions(this.opts);\n\n    // If we are in the \"pass per preset\" mode, build\n    // also plugins for each preset.\n    if (this.opts.passPerPreset) {\n      // All the \"per preset\" options are inherited from the main options.\n      this.perPresetOpts = [];\n      this.opts.presets.forEach(function (presetOpts) {\n        var perPresetOpts = _Object$assign(_Object$create(_this.opts), presetOpts);\n        _this.perPresetOpts.push(perPresetOpts);\n        _this.buildPluginsForOptions(perPresetOpts);\n      });\n    }\n\n    this.metadata = {\n      usedHelpers: [],\n      marked: [],\n      modules: {\n        imports: [],\n        exports: {\n          exported: [],\n          specifiers: []\n        }\n      }\n    };\n\n    this.dynamicImportTypes = {};\n    this.dynamicImportIds = {};\n    this.dynamicImports = [];\n    this.declarations = {};\n    this.usedHelpers = {};\n\n    this.path = null;\n    this.ast = {};\n\n    this.code = \"\";\n    this.shebang = \"\";\n\n    this.hub = new _babelTraverse.Hub(this);\n  }\n\n  File.prototype.getMetadata = function getMetadata() {\n    var has = false;\n    var _arr = this.ast.program.body;\n    for (var _i = 0; _i < _arr.length; _i++) {\n      var node = _arr[_i];\n      if (t.isModuleDeclaration(node)) {\n        has = true;\n        break;\n      }\n    }\n    if (has) {\n      this.path.traverse(metadataVisitor, this);\n    }\n  };\n\n  File.prototype.initOptions = function initOptions(opts) {\n    opts = new _optionsOptionManager2[\"default\"](this.log, this.pipeline).init(opts);\n\n    if (opts.inputSourceMap) {\n      opts.sourceMaps = true;\n    }\n\n    if (opts.moduleId) {\n      opts.moduleIds = true;\n    }\n\n    opts.basename = _path2[\"default\"].basename(opts.filename, _path2[\"default\"].extname(opts.filename));\n\n    opts.ignore = util.arrayify(opts.ignore, util.regexify);\n\n    if (opts.only) opts.only = util.arrayify(opts.only, util.regexify);\n\n    _lodashObjectDefaults2[\"default\"](opts, {\n      moduleRoot: opts.sourceRoot\n    });\n\n    _lodashObjectDefaults2[\"default\"](opts, {\n      sourceRoot: opts.moduleRoot\n    });\n\n    _lodashObjectDefaults2[\"default\"](opts, {\n      filenameRelative: opts.filename\n    });\n\n    var basenameRelative = _path2[\"default\"].basename(opts.filenameRelative);\n\n    _lodashObjectDefaults2[\"default\"](opts, {\n      sourceFileName: basenameRelative,\n      sourceMapTarget: basenameRelative\n    });\n\n    return opts;\n  };\n\n  File.prototype.buildPluginsForOptions = function buildPluginsForOptions(opts) {\n    if (!Array.isArray(opts.plugins)) {\n      return;\n    }\n\n    var plugins = opts.plugins.concat(INTERNAL_PLUGINS);\n    var currentPluginVisitors = [];\n    var currentPluginPasses = [];\n\n    // init plugins!\n    for (var _i2 = 0; _i2 < plugins.length; _i2++) {\n      var ref = plugins[_i2];var plugin = ref[0];\n      var pluginOpts = ref[1];\n      // todo: fix - can't embed in loop head because of flow bug\n\n      currentPluginVisitors.push(plugin.visitor);\n      currentPluginPasses.push(new _pluginPass2[\"default\"](this, plugin, pluginOpts));\n\n      if (plugin.manipulateOptions) {\n        plugin.manipulateOptions(opts, this.parserOpts, this);\n      }\n    }\n\n    this.pluginVisitors.push(currentPluginVisitors);\n    this.pluginPasses.push(currentPluginPasses);\n  };\n\n  File.prototype.getModuleName = function getModuleName() {\n    var opts = this.opts;\n    if (!opts.moduleIds) {\n      return null;\n    }\n\n    // moduleId is n/a if a `getModuleId()` is provided\n    if (opts.moduleId != null && !opts.getModuleId) {\n      return opts.moduleId;\n    }\n\n    var filenameRelative = opts.filenameRelative;\n    var moduleName = \"\";\n\n    if (opts.moduleRoot != null) {\n      moduleName = opts.moduleRoot + \"/\";\n    }\n\n    if (!opts.filenameRelative) {\n      return moduleName + opts.filename.replace(/^\\//, \"\");\n    }\n\n    if (opts.sourceRoot != null) {\n      // remove sourceRoot from filename\n      var sourceRootRegEx = new RegExp(\"^\" + opts.sourceRoot + \"\\/?\");\n      filenameRelative = filenameRelative.replace(sourceRootRegEx, \"\");\n    }\n\n    // remove extension\n    filenameRelative = filenameRelative.replace(/\\.(\\w*?)$/, \"\");\n\n    moduleName += filenameRelative;\n\n    // normalize path separators\n    moduleName = moduleName.replace(/\\\\/g, \"/\");\n\n    if (opts.getModuleId) {\n      // If return is falsy, assume they want us to use our generated default name\n      return opts.getModuleId(moduleName) || moduleName;\n    } else {\n      return moduleName;\n    }\n  };\n\n  File.prototype.resolveModuleSource = function resolveModuleSource(source) {\n    var resolveModuleSource = this.opts.resolveModuleSource;\n    if (resolveModuleSource) source = resolveModuleSource(source, this.opts.filename);\n    return source;\n  };\n\n  File.prototype.addImport = function addImport(source, imported) {\n    var name = arguments.length <= 2 || arguments[2] === undefined ? imported : arguments[2];\n    return (function () {\n      var alias = source + \":\" + imported;\n      var id = this.dynamicImportIds[alias];\n\n      if (!id) {\n        source = this.resolveModuleSource(source);\n        id = this.dynamicImportIds[alias] = this.scope.generateUidIdentifier(name);\n\n        var specifiers = [];\n\n        if (imported === \"*\") {\n          specifiers.push(t.importNamespaceSpecifier(id));\n        } else if (imported === \"default\") {\n          specifiers.push(t.importDefaultSpecifier(id));\n        } else {\n          specifiers.push(t.importSpecifier(id, t.identifier(imported)));\n        }\n\n        var declar = t.importDeclaration(specifiers, t.stringLiteral(source));\n        declar._blockHoist = 3;\n\n        this.path.unshiftContainer(\"body\", declar);\n      }\n\n      return id;\n    }).apply(this, arguments);\n  };\n\n  File.prototype.addHelper = function addHelper(name) {\n    var declar = this.declarations[name];\n    if (declar) return declar;\n\n    if (!this.usedHelpers[name]) {\n      this.metadata.usedHelpers.push(name);\n      this.usedHelpers[name] = true;\n    }\n\n    var generator = this.get(\"helperGenerator\");\n    var runtime = this.get(\"helpersNamespace\");\n    if (generator) {\n      var res = generator(name);\n      if (res) return res;\n    } else if (runtime) {\n      return t.memberExpression(runtime, t.identifier(name));\n    }\n\n    var ref = _babelHelpers2[\"default\"](name);\n    var uid = this.declarations[name] = this.scope.generateUidIdentifier(name);\n\n    if (t.isFunctionExpression(ref) && !ref.id) {\n      ref.body._compact = true;\n      ref._generated = true;\n      ref.id = uid;\n      ref.type = \"FunctionDeclaration\";\n      this.path.unshiftContainer(\"body\", ref);\n    } else {\n      ref._compact = true;\n      this.scope.push({\n        id: uid,\n        init: ref,\n        unique: true\n      });\n    }\n\n    return uid;\n  };\n\n  File.prototype.addTemplateObject = function addTemplateObject(helperName, strings, raw) {\n    // Generate a unique name based on the string literals so we dedupe\n    // identical strings used in the program.\n    var stringIds = raw.elements.map(function (string) {\n      return string.value;\n    });\n    var name = helperName + \"_\" + raw.elements.length + \"_\" + stringIds.join(\",\");\n\n    var declar = this.declarations[name];\n    if (declar) return declar;\n\n    var uid = this.declarations[name] = this.scope.generateUidIdentifier(\"templateObject\");\n\n    var helperId = this.addHelper(helperName);\n    var init = t.callExpression(helperId, [strings, raw]);\n    init._compact = true;\n    this.scope.push({\n      id: uid,\n      init: init,\n      _blockHoist: 1.9 // This ensures that we don't fail if not using function expression helpers\n    });\n    return uid;\n  };\n\n  File.prototype.buildCodeFrameError = function buildCodeFrameError(node, msg) {\n    var Error = arguments.length <= 2 || arguments[2] === undefined ? SyntaxError : arguments[2];\n\n    var loc = node && (node.loc || node._loc);\n\n    var err = new Error(msg);\n\n    if (loc) {\n      err.loc = loc.start;\n    } else {\n      _babelTraverse2[\"default\"](node, errorVisitor, this.scope, err);\n\n      err.message += \" (This is an error on an internal node. Probably an internal error\";\n\n      if (err.loc) {\n        err.message += \". Location has been estimated.\";\n      }\n\n      err.message += \")\";\n    }\n\n    return err;\n  };\n\n  File.prototype.mergeSourceMap = function mergeSourceMap(map) {\n    var inputMap = this.opts.inputSourceMap;\n\n    if (inputMap) {\n      var _ret = (function () {\n        var inputMapConsumer = new _sourceMap2[\"default\"].SourceMapConsumer(inputMap);\n        var outputMapConsumer = new _sourceMap2[\"default\"].SourceMapConsumer(map);\n\n        var mergedGenerator = new _sourceMap2[\"default\"].SourceMapGenerator({\n          file: inputMapConsumer.file,\n          sourceRoot: inputMapConsumer.sourceRoot\n        });\n\n        // This assumes the output map always has a single source, since Babel always compiles a single source file to a\n        // single output file.\n        var source = outputMapConsumer.sources[0];\n\n        inputMapConsumer.eachMapping(function (mapping) {\n          var generatedPosition = outputMapConsumer.generatedPositionFor({\n            line: mapping.generatedLine,\n            column: mapping.generatedColumn,\n            source: source\n          });\n          if (generatedPosition.column != null) {\n            mergedGenerator.addMapping({\n              source: mapping.source,\n\n              original: {\n                line: mapping.originalLine,\n                column: mapping.originalColumn\n              },\n\n              generated: generatedPosition\n            });\n          }\n        });\n\n        var mergedMap = mergedGenerator.toJSON();\n        inputMap.mappings = mergedMap.mappings;\n        return {\n          v: inputMap\n        };\n      })();\n\n      // istanbul ignore next\n      if (typeof _ret === \"object\") return _ret.v;\n    } else {\n      return map;\n    }\n  };\n\n  File.prototype.parse = function parse(code) {\n    this.log.debug(\"Parse start\");\n    var ast = _babylon.parse(code, this.parserOpts);\n    this.log.debug(\"Parse stop\");\n    return ast;\n  };\n\n  File.prototype._addAst = function _addAst(ast) {\n    this.path = _babelTraverse.NodePath.get({\n      hub: this.hub,\n      parentPath: null,\n      parent: ast,\n      container: ast,\n      key: \"program\"\n    }).setContext();\n    this.scope = this.path.scope;\n    this.ast = ast;\n    this.getMetadata();\n  };\n\n  File.prototype.addAst = function addAst(ast) {\n    this.log.debug(\"Start set AST\");\n    this._addAst(ast);\n    this.log.debug(\"End set AST\");\n  };\n\n  File.prototype.transform = function transform() {\n    // istanbul ignore next\n\n    var _this2 = this;\n\n    // In the \"pass per preset\" mode, we have grouped passes.\n    // Otherwise, there is only one plain pluginPasses array.\n    this.pluginPasses.forEach(function (pluginPasses, index) {\n      _this2.call(\"pre\", pluginPasses);\n      _this2.log.debug(\"Start transform traverse\");\n      _babelTraverse2[\"default\"](_this2.ast, _babelTraverse2[\"default\"].visitors.merge(_this2.pluginVisitors[index], pluginPasses), _this2.scope);\n      _this2.log.debug(\"End transform traverse\");\n      _this2.call(\"post\", pluginPasses);\n    });\n\n    return this.generate();\n  };\n\n  File.prototype.wrap = function wrap(code, callback) {\n    code = code + \"\";\n\n    try {\n      if (this.shouldIgnore()) {\n        return this.makeResult({ code: code, ignored: true });\n      } else {\n        return callback();\n      }\n    } catch (err) {\n      if (err._babel) {\n        throw err;\n      } else {\n        err._babel = true;\n      }\n\n      var message = err.message = this.opts.filename + \": \" + err.message;\n\n      var loc = err.loc;\n      if (loc) {\n        err.codeFrame = _babelCodeFrame2[\"default\"](code, loc.line, loc.column + 1, this.opts);\n        message += \"\\n\" + err.codeFrame;\n      }\n\n      if (process.browser) {\n        // chrome has it's own pretty stringifier which doesn't use the stack property\n        // https://github.com/babel/babel/issues/2175\n        err.message = message;\n      }\n\n      if (err.stack) {\n        var newStack = err.stack.replace(err.message, message);\n        err.stack = newStack;\n      }\n\n      throw err;\n    }\n  };\n\n  File.prototype.addCode = function addCode(code) {\n    code = (code || \"\") + \"\";\n    code = this.parseInputSourceMap(code);\n    this.code = code;\n  };\n\n  File.prototype.parseCode = function parseCode() {\n    this.parseShebang();\n    var ast = this.parse(this.code);\n    this.addAst(ast);\n  };\n\n  File.prototype.shouldIgnore = function shouldIgnore() {\n    var opts = this.opts;\n    return util.shouldIgnore(opts.filename, opts.ignore, opts.only);\n  };\n\n  File.prototype.call = function call(key, pluginPasses) {\n    for (var _i3 = 0; _i3 < pluginPasses.length; _i3++) {\n      var pass = pluginPasses[_i3];\n      var plugin = pass.plugin;\n      var fn = plugin[key];\n      if (fn) fn.call(pass, this);\n    }\n  };\n\n  File.prototype.parseInputSourceMap = function parseInputSourceMap(code) {\n    var opts = this.opts;\n\n    if (opts.inputSourceMap !== false) {\n      var inputMap = _convertSourceMap2[\"default\"].fromSource(code);\n      if (inputMap) {\n        opts.inputSourceMap = inputMap.toObject();\n        code = _convertSourceMap2[\"default\"].removeComments(code);\n      }\n    }\n\n    return code;\n  };\n\n  File.prototype.parseShebang = function parseShebang() {\n    var shebangMatch = _shebangRegex2[\"default\"].exec(this.code);\n    if (shebangMatch) {\n      this.shebang = shebangMatch[0];\n      this.code = this.code.replace(_shebangRegex2[\"default\"], \"\");\n    }\n  };\n\n  File.prototype.makeResult = function makeResult(_ref) {\n    var code = _ref.code;\n    var map = _ref.map;\n    var ast = _ref.ast;\n    var ignored = _ref.ignored;\n\n    var result = {\n      metadata: null,\n      options: this.opts,\n      ignored: !!ignored,\n      code: null,\n      ast: null,\n      map: map || null\n    };\n\n    if (this.opts.code) {\n      result.code = code;\n    }\n\n    if (this.opts.ast) {\n      result.ast = ast;\n    }\n\n    if (this.opts.metadata) {\n      result.metadata = this.metadata;\n    }\n\n    return result;\n  };\n\n  File.prototype.generate = function generate() {\n    var opts = this.opts;\n    var ast = this.ast;\n\n    var result = { ast: ast };\n    if (!opts.code) return this.makeResult(result);\n\n    this.log.debug(\"Generation start\");\n\n    var _result = _babelGenerator2[\"default\"](ast, opts, this.code);\n    result.code = _result.code;\n    result.map = _result.map;\n\n    this.log.debug(\"Generation end\");\n\n    if (this.shebang) {\n      // add back shebang\n      result.code = this.shebang + \"\\n\" + result.code;\n    }\n\n    if (result.map) {\n      result.map = this.mergeSourceMap(result.map);\n    }\n\n    if (opts.sourceMaps === \"inline\" || opts.sourceMaps === \"both\") {\n      result.code += \"\\n\" + _convertSourceMap2[\"default\"].fromObject(result.map).toComment();\n    }\n\n    if (opts.sourceMaps === \"inline\") {\n      result.map = null;\n    }\n\n    return this.makeResult(result);\n  };\n\n  return File;\n})(_store2[\"default\"]);\n\nexports[\"default\"] = File;\nexports.File = File;"]}