{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["\"use strict\";\n\nvar _getIterator = require(\"babel-runtime/core-js/get-iterator\")[\"default\"];\n\nvar _interopRequireWildcard = require(\"babel-runtime/helpers/interop-require-wildcard\")[\"default\"];\n\nexports.__esModule = true;\nexports.assertEach = assertEach;\nexports.assertOneOf = assertOneOf;\nexports.assertNodeType = assertNodeType;\nexports.assertNodeOrValueType = assertNodeOrValueType;\nexports.assertValueType = assertValueType;\nexports.chain = chain;\nexports[\"default\"] = defineType;\n\nvar _index = require(\"../index\");\n\nvar t = _interopRequireWildcard(_index);\n\nvar VISITOR_KEYS = {};\nexports.VISITOR_KEYS = VISITOR_KEYS;\nvar ALIAS_KEYS = {};\nexports.ALIAS_KEYS = ALIAS_KEYS;\nvar NODE_FIELDS = {};\nexports.NODE_FIELDS = NODE_FIELDS;\nvar BUILDER_KEYS = {};\nexports.BUILDER_KEYS = BUILDER_KEYS;\nvar DEPRECATED_KEYS = {};\n\nexports.DEPRECATED_KEYS = DEPRECATED_KEYS;\nfunction getType(val) {\n  if (Array.isArray(val)) {\n    return \"array\";\n  } else if (val === null) {\n    return \"null\";\n  } else if (val === undefined) {\n    return \"undefined\";\n  } else {\n    return typeof val;\n  }\n}\n\nfunction assertEach(callback) {\n  function validator(node, key, val) {\n    if (!Array.isArray(val)) return;\n\n    for (var i = 0; i < val.length; i++) {\n      callback(node, key + \"[\" + i + \"]\", val[i]);\n    }\n  }\n  validator.each = callback;\n  return validator;\n}\n\nfunction assertOneOf() {\n  for (var _len = arguments.length, vals = Array(_len), _key = 0; _key < _len; _key++) {\n    vals[_key] = arguments[_key];\n  }\n\n  function validate(node, key, val) {\n    if (vals.indexOf(val) < 0) {\n      throw new TypeError(\"Property \" + key + \" expected value to be one of \" + JSON.stringify(vals) + \" but got \" + JSON.stringify(val));\n    }\n  }\n\n  validate.oneOf = vals;\n\n  return validate;\n}\n\nfunction assertNodeType() {\n  for (var _len2 = arguments.length, types = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    types[_key2] = arguments[_key2];\n  }\n\n  function validate(node, key, val) {\n    var valid = false;\n\n    for (var _iterator = types, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _getIterator(_iterator);;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var type = _ref;\n\n      if (t.is(type, val)) {\n        valid = true;\n        break;\n      }\n    }\n\n    if (!valid) {\n      throw new TypeError(\"Property \" + key + \" of \" + node.type + \" expected node to be of a type \" + JSON.stringify(types) + \" \" + (\"but instead got \" + JSON.stringify(val && val.type)));\n    }\n  }\n\n  validate.oneOfNodeTypes = types;\n\n  return validate;\n}\n\nfunction assertNodeOrValueType() {\n  for (var _len3 = arguments.length, types = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    types[_key3] = arguments[_key3];\n  }\n\n  function validate(node, key, val) {\n    var valid = false;\n\n    for (var _iterator2 = types, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _getIterator(_iterator2);;) {\n      var _ref2;\n\n      if (_isArray2) {\n        if (_i2 >= _iterator2.length) break;\n        _ref2 = _iterator2[_i2++];\n      } else {\n        _i2 = _iterator2.next();\n        if (_i2.done) break;\n        _ref2 = _i2.value;\n      }\n\n      var type = _ref2;\n\n      if (getType(val) === type || t.is(type, val)) {\n        valid = true;\n        break;\n      }\n    }\n\n    if (!valid) {\n      throw new TypeError(\"Property \" + key + \" of \" + node.type + \" expected node to be of a type \" + JSON.stringify(types) + \" \" + (\"but instead got \" + JSON.stringify(val && val.type)));\n    }\n  }\n\n  validate.oneOfNodeOrValueTypes = types;\n\n  return validate;\n}\n\nfunction assertValueType(type) {\n  function validate(node, key, val) {\n    var valid = getType(val) === type;\n\n    if (!valid) {\n      throw new TypeError(\"Property \" + key + \" expected type of \" + type + \" but got \" + getType(val));\n    }\n  }\n\n  validate.type = type;\n\n  return validate;\n}\n\nfunction chain() {\n  for (var _len4 = arguments.length, fns = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    fns[_key4] = arguments[_key4];\n  }\n\n  function validate() {\n    for (var _iterator3 = fns, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _getIterator(_iterator3);;) {\n      var _ref3;\n\n      if (_isArray3) {\n        if (_i3 >= _iterator3.length) break;\n        _ref3 = _iterator3[_i3++];\n      } else {\n        _i3 = _iterator3.next();\n        if (_i3.done) break;\n        _ref3 = _i3.value;\n      }\n\n      var fn = _ref3;\n\n      fn.apply(undefined, arguments);\n    }\n  }\n  validate.chainOf = fns;\n  return validate;\n}\n\nfunction defineType(type) {\n  var opts = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n  var inherits = opts.inherits && store[opts.inherits] || {};\n\n  opts.fields = opts.fields || inherits.fields || {};\n  opts.visitor = opts.visitor || inherits.visitor || [];\n  opts.aliases = opts.aliases || inherits.aliases || [];\n  opts.builder = opts.builder || inherits.builder || opts.visitor || [];\n\n  if (opts.deprecatedAlias) {\n    DEPRECATED_KEYS[opts.deprecatedAlias] = type;\n  }\n\n  // ensure all field keys are represented in `fields`\n\n  var _arr = opts.visitor.concat(opts.builder);\n\n  for (var _i4 = 0; _i4 < _arr.length; _i4++) {\n    var key = _arr[_i4];\n    opts.fields[key] = opts.fields[key] || {};\n  }\n\n  for (var key in opts.fields) {\n    var field = opts.fields[key];\n\n    if (field[\"default\"] === undefined) {\n      field[\"default\"] = null;\n    } else if (!field.validate) {\n      field.validate = assertValueType(getType(field[\"default\"]));\n    }\n  }\n\n  VISITOR_KEYS[type] = opts.visitor;\n  BUILDER_KEYS[type] = opts.builder;\n  NODE_FIELDS[type] = opts.fields;\n  ALIAS_KEYS[type] = opts.aliases;\n\n  store[type] = opts;\n}\n\nvar store = {};"]}