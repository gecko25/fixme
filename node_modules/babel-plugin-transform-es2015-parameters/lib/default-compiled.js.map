{"version":3,"sources":["default.js"],"names":[],"mappings":"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","file":"default-compiled.js","sourcesContent":["/* eslint max-len: 0 */\n\n\"use strict\";\n\nvar _interopRequireDefault = require(\"babel-runtime/helpers/interop-require-default\")[\"default\"];\n\nvar _interopRequireWildcard = require(\"babel-runtime/helpers/interop-require-wildcard\")[\"default\"];\n\nexports.__esModule = true;\n\nvar _babelHelperGetFunctionArity = require(\"babel-helper-get-function-arity\");\n\nvar _babelHelperGetFunctionArity2 = _interopRequireDefault(_babelHelperGetFunctionArity);\n\nvar _babelHelperCallDelegate = require(\"babel-helper-call-delegate\");\n\nvar _babelHelperCallDelegate2 = _interopRequireDefault(_babelHelperCallDelegate);\n\nvar _babelTemplate = require(\"babel-template\");\n\nvar _babelTemplate2 = _interopRequireDefault(_babelTemplate);\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nvar buildDefaultParam = _babelTemplate2[\"default\"](\"\\n  let VARIABLE_NAME =\\n    ARGUMENTS.length <= ARGUMENT_KEY || ARGUMENTS[ARGUMENT_KEY] === undefined ?\\n      DEFAULT_VALUE\\n    :\\n      ARGUMENTS[ARGUMENT_KEY];\\n\");\n\nvar buildDefaultParamAssign = _babelTemplate2[\"default\"](\"\\n  if (VARIABLE_NAME === undefined) VARIABLE_NAME = DEFAULT_VALUE;\\n\");\n\nvar buildCutOff = _babelTemplate2[\"default\"](\"\\n  let $0 = $1[$2];\\n\");\n\nfunction hasDefaults(node) {\n  var _arr = node.params;\n\n  for (var _i = 0; _i < _arr.length; _i++) {\n    var param = _arr[_i];\n    if (!t.isIdentifier(param)) return true;\n  }\n  return false;\n}\n\nvar iifeVisitor = {\n  ReferencedIdentifier: function ReferencedIdentifier(path, state) {\n    var name = path.node.name;\n    if (name === \"eval\" || path.scope.hasOwnBinding(name) && path.scope.getOwnBinding(name).kind !== \"param\") {\n      state.iife = true;\n      path.stop();\n    }\n  },\n\n  Scope: function Scope(path) {\n    // different bindings\n    path.skip();\n  }\n};\n\nvar visitor = {\n  Function: function Function(path) {\n    var node = path.node;\n    var scope = path.scope;\n\n    if (!hasDefaults(node)) return;\n\n    // ensure it's a block, useful for arrow functions\n    path.ensureBlock();\n\n    var state = {\n      iife: false,\n      scope: scope\n    };\n\n    var body = [];\n\n    //\n    var argsIdentifier = t.identifier(\"arguments\");\n    argsIdentifier._shadowedFunctionLiteral = path;\n\n    // push a default parameter definition\n    function pushDefNode(left, right, i) {\n      var defNode = undefined;\n      if (exceedsLastNonDefault(i) || t.isPattern(left)) {\n        defNode = buildDefaultParam({\n          VARIABLE_NAME: left,\n          DEFAULT_VALUE: right,\n          ARGUMENT_KEY: t.numericLiteral(i),\n          ARGUMENTS: argsIdentifier\n        });\n      } else {\n        defNode = buildDefaultParamAssign({\n          VARIABLE_NAME: left,\n          DEFAULT_VALUE: right\n        });\n      }\n      defNode._blockHoist = node.params.length - i;\n      body.push(defNode);\n    }\n\n    // check if an index exceeds the functions arity\n    function exceedsLastNonDefault(i) {\n      return i + 1 > lastNonDefaultParam;\n    }\n\n    //\n    var lastNonDefaultParam = _babelHelperGetFunctionArity2[\"default\"](node);\n\n    //\n    var params = path.get(\"params\");\n    for (var i = 0; i < params.length; i++) {\n      var param = params[i];\n\n      if (!param.isAssignmentPattern()) {\n        if (!param.isIdentifier()) {\n          param.traverse(iifeVisitor, state);\n        }\n\n        continue;\n      }\n\n      var left = param.get(\"left\");\n      var right = param.get(\"right\");\n\n      //\n      if (exceedsLastNonDefault(i) || left.isPattern()) {\n        var placeholder = scope.generateUidIdentifier(\"x\");\n        placeholder._isDefaultPlaceholder = true;\n        node.params[i] = placeholder;\n      } else {\n        node.params[i] = left.node;\n      }\n\n      //\n      if (!state.iife) {\n        if (right.isIdentifier() && scope.hasOwnBinding(right.node.name) && scope.getOwnBinding(right.node.name).kind !== \"param\") {\n          // the right hand side references a parameter\n          state.iife = true;\n        } else {\n          right.traverse(iifeVisitor, state);\n        }\n      }\n\n      pushDefNode(left.node, right.node, i);\n    }\n\n    // add declarations for trailing parameters\n    for (var i = lastNonDefaultParam + 1; i < node.params.length; i++) {\n      var param = node.params[i];\n      if (param._isDefaultPlaceholder) continue;\n\n      var declar = buildCutOff(param, argsIdentifier, t.numericLiteral(i));\n      declar._blockHoist = node.params.length - i;\n      body.push(declar);\n    }\n\n    // we need to cut off all trailing parameters\n    node.params = node.params.slice(0, lastNonDefaultParam);\n\n    if (state.iife) {\n      body.push(_babelHelperCallDelegate2[\"default\"](path, scope));\n      path.set(\"body\", t.blockStatement(body));\n    } else {\n      path.get(\"body\").unshiftContainer(\"body\", body);\n    }\n  }\n};\nexports.visitor = visitor;"]}