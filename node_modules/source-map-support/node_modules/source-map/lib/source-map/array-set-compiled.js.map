{"version":3,"sources":["array-set.js"],"names":[],"mappings":";;;;;;;;AAMA,IAAI,OAAO,MAAP,KAAkB,UAAlB,EAA8B;AAC9B,MAAI,SAAS,QAAQ,UAAR,EAAoB,MAApB,EAA4B,OAA5B,CAAT,CAD0B;CAAlC;AAGA,OAAO,UAAU,OAAV,EAAmB,OAAnB,EAA4B,MAA5B,EAAoC;;AAEzC,MAAI,OAAO,QAAQ,QAAR,CAAP;;;;;;;;AAFqC,WAUhC,QAAT,GAAoB;AAClB,SAAK,MAAL,GAAc,EAAd,CADkB;AAElB,SAAK,IAAL,GAAY,EAAZ,CAFkB;GAApB;;;;;AAVyC,UAkBzC,CAAS,SAAT,GAAqB,SAAS,kBAAT,CAA4B,MAA5B,EAAoC,gBAApC,EAAsD;AACzE,QAAI,MAAM,IAAI,QAAJ,EAAN,CADqE;AAEzE,SAAK,IAAI,IAAI,CAAJ,EAAO,MAAM,OAAO,MAAP,EAAe,IAAI,GAAJ,EAAS,GAA9C,EAAmD;AACjD,UAAI,GAAJ,CAAQ,OAAO,CAAP,CAAR,EAAmB,gBAAnB,EADiD;KAAnD;AAGA,WAAO,GAAP,CALyE;GAAtD;;;;;;;AAlBoB,UA+BzC,CAAS,SAAT,CAAmB,GAAnB,GAAyB,SAAS,YAAT,CAAsB,IAAtB,EAA4B,gBAA5B,EAA8C;AACrE,QAAI,cAAc,KAAK,GAAL,CAAS,IAAT,CAAd,CADiE;AAErE,QAAI,MAAM,KAAK,MAAL,CAAY,MAAZ,CAF2D;AAGrE,QAAI,CAAC,WAAD,IAAgB,gBAAhB,EAAkC;AACpC,WAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,EADoC;KAAtC;AAGA,QAAI,CAAC,WAAD,EAAc;AAChB,WAAK,IAAL,CAAU,KAAK,WAAL,CAAiB,IAAjB,CAAV,IAAoC,GAApC,CADgB;KAAlB;GANuB;;;;;;;AA/BgB,UA+CzC,CAAS,SAAT,CAAmB,GAAnB,GAAyB,SAAS,YAAT,CAAsB,IAAtB,EAA4B;AACnD,WAAO,OAAO,SAAP,CAAiB,cAAjB,CAAgC,IAAhC,CAAqC,KAAK,IAAL,EACA,KAAK,WAAL,CAAiB,IAAjB,CADrC,CAAP,CADmD;GAA5B;;;;;;;AA/CgB,UAyDzC,CAAS,SAAT,CAAmB,OAAnB,GAA6B,SAAS,gBAAT,CAA0B,IAA1B,EAAgC;AAC3D,QAAI,KAAK,GAAL,CAAS,IAAT,CAAJ,EAAoB;AAClB,aAAO,KAAK,IAAL,CAAU,KAAK,WAAL,CAAiB,IAAjB,CAAV,CAAP,CADkB;KAApB;AAGA,UAAM,IAAI,KAAJ,CAAU,MAAM,IAAN,GAAa,sBAAb,CAAhB,CAJ2D;GAAhC;;;;;;;AAzDY,UAqEzC,CAAS,SAAT,CAAmB,EAAnB,GAAwB,SAAS,WAAT,CAAqB,IAArB,EAA2B;AACjD,QAAI,QAAQ,CAAR,IAAa,OAAO,KAAK,MAAL,CAAY,MAAZ,EAAoB;AAC1C,aAAO,KAAK,MAAL,CAAY,IAAZ,CAAP,CAD0C;KAA5C;AAGA,UAAM,IAAI,KAAJ,CAAU,2BAA2B,IAA3B,CAAhB,CAJiD;GAA3B;;;;;;;AArEiB,UAiFzC,CAAS,SAAT,CAAmB,OAAnB,GAA6B,SAAS,gBAAT,GAA4B;AACvD,WAAO,KAAK,MAAL,CAAY,KAAZ,EAAP,CADuD;GAA5B,CAjFY;;AAqFzC,UAAQ,QAAR,GAAmB,QAAnB,CArFyC;CAApC,CAAP","file":"array-set-compiled.js","sourcesContent":["/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\nif (typeof define !== 'function') {\n    var define = require('amdefine')(module, require);\n}\ndefine(function (require, exports, module) {\n\n  var util = require('./util');\n\n  /**\n   * A data structure which is a combination of an array and a set. Adding a new\n   * member is O(1), testing for membership is O(1), and finding the index of an\n   * element is O(1). Removing elements from the set is not supported. Only\n   * strings are supported for membership.\n   */\n  function ArraySet() {\n    this._array = [];\n    this._set = {};\n  }\n\n  /**\n   * Static method for creating ArraySet instances from an existing array.\n   */\n  ArraySet.fromArray = function ArraySet_fromArray(aArray, aAllowDuplicates) {\n    var set = new ArraySet();\n    for (var i = 0, len = aArray.length; i < len; i++) {\n      set.add(aArray[i], aAllowDuplicates);\n    }\n    return set;\n  };\n\n  /**\n   * Add the given string to this set.\n   *\n   * @param String aStr\n   */\n  ArraySet.prototype.add = function ArraySet_add(aStr, aAllowDuplicates) {\n    var isDuplicate = this.has(aStr);\n    var idx = this._array.length;\n    if (!isDuplicate || aAllowDuplicates) {\n      this._array.push(aStr);\n    }\n    if (!isDuplicate) {\n      this._set[util.toSetString(aStr)] = idx;\n    }\n  };\n\n  /**\n   * Is the given string a member of this set?\n   *\n   * @param String aStr\n   */\n  ArraySet.prototype.has = function ArraySet_has(aStr) {\n    return Object.prototype.hasOwnProperty.call(this._set,\n                                                util.toSetString(aStr));\n  };\n\n  /**\n   * What is the index of the given string in the array?\n   *\n   * @param String aStr\n   */\n  ArraySet.prototype.indexOf = function ArraySet_indexOf(aStr) {\n    if (this.has(aStr)) {\n      return this._set[util.toSetString(aStr)];\n    }\n    throw new Error('\"' + aStr + '\" is not in the set.');\n  };\n\n  /**\n   * What is the element at the given index?\n   *\n   * @param Number aIdx\n   */\n  ArraySet.prototype.at = function ArraySet_at(aIdx) {\n    if (aIdx >= 0 && aIdx < this._array.length) {\n      return this._array[aIdx];\n    }\n    throw new Error('No element indexed by ' + aIdx);\n  };\n\n  /**\n   * Returns the array representation of this set (which has the proper indices\n   * indicated by indexOf). Note that this is a copy of the internal array used\n   * for storing the members so that no one can mess with internal state.\n   */\n  ArraySet.prototype.toArray = function ArraySet_toArray() {\n    return this._array.slice();\n  };\n\n  exports.ArraySet = ArraySet;\n\n});\n"]}